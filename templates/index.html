<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìˆ¨ì€ ë‹¨ì–´ ì°¾ê¸° ìƒì„±ê¸°</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        let wordCount = 18;

        function addWord() {
            wordCount++;
            const container = document.getElementById('word-grid');
            const div = document.createElement('div');
            div.className = 'input-group';
            div.id = 'group_' + wordCount;
            div.innerHTML = `<span>${wordCount}</span><input type="text" name="word_${wordCount}" class="word-input" required>`;
            container.appendChild(div);
        }

        function removeWord() {
            if (wordCount > 1) {
                document.getElementById('group_' + wordCount).remove();
                wordCount--;
            }
        }

        function clearAll() {
            document.querySelectorAll('.word-input').forEach(input => { input.value = ''; });
        }

        function setLanguage(lang) {
            const enWords = {{ en|tojson }};
            const koWords = {{ ko|tojson }};
            const target = (lang === 'en') ? enWords : koWords;
            
            // ì¹¸ ê°œìˆ˜ ë™ê¸°í™”
            while (wordCount < target.length) addWord();
            while (wordCount > target.length) removeWord();
            
            for(let i = 1; i <= target.length; i++) {
                document.getElementsByName('word_' + i)[0].value = target[i-1];
            }
            document.getElementById('lang_mode').value = lang;
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ìˆ¨ì€ ë‹¨ì–´ ì°¾ê¸° ìƒì„±ê¸°</h1>
        <div class="controls">
            <button type="button" onclick="setLanguage('en')">English Mode</button>
            <button type="button" onclick="setLanguage('ko')">í•œêµ­ì–´ ëª¨ë“œ</button>
            <button type="button" onclick="addWord()" style="background:#3498db">+ ì¹¸ ì¶”ê°€</button>
            <button type="button" onclick="removeWord()" style="background:#95a5a6">- ì¹¸ ì‚­ì œ</button>
            <button type="button" onclick="clearAll()" style="background:#e74c3c">ì „ì²´ ì´ˆê¸°í™”</button>
        </div>
        
        <form action="/generate" method="POST">
            <input type="hidden" name="lang" id="lang_mode" value="en">
            <div class="difficulty-section">
                <label>ë‚œì´ë„ (1-100): <span id="diffVal">50</span></label>
                <input type="range" name="difficulty" min="1" max="100" value="50" oninput="document.getElementById('diffVal').innerText = this.value">
            </div>

            <div class="word-grid" id="word-grid">
                {% for i in range(1, 19) %}
                <div class="input-group" id="group_{{ i }}">
                    <span>{{ i }}</span>
                    <input type="text" name="word_{{ i }}" class="word-input" value="{{ en[i-1] }}" required>
                </div>
                {% endfor %}
            </div>
            <button type="submit" class="generate-btn">PDF ìƒì„± ë° ë‹¤ìš´ë¡œë“œ</button>
        </form>
    </div>
</body>
</html>