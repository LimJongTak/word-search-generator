<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìˆ¨ì€ ë‹¨ì–´ ì°¾ê¸° ìƒì„±ê¸°</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        const FIXED_COUNT = 18;

        async function fetchAndFillWords() {
            const lang = document.getElementById('lang_mode').value;
            const category = document.getElementById('category_select').value;
            
            const response = await fetch(`/get_words?lang=${lang}&category=${category}`);
            const data = await response.json();
            const words = data.words;

            for(let i = 1; i <= FIXED_COUNT; i++) {
                const el = document.getElementsByName('word_' + i)[0];
                if(el) el.value = words[i-1] || '';
            }
        }

        function clearAll() {
            document.querySelectorAll('.word-input').forEach(input => { input.value = ''; });
        }

        function setLanguage(lang) {
            document.getElementById('lang_mode').value = lang;
            fetchAndFillWords();
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ìˆ¨ì€ ë‹¨ì–´ ì°¾ê¸° ìƒì„±ê¸° (ê³ ì • 18ë‹¨ì–´)</h1>
        
        <div class="controls">
            <select id="category_select" onchange="fetchAndFillWords()" style="padding: 10px; border-radius: 5px; font-size: 16px;">
                <option value="random">ğŸ² ë¬´ì‘ìœ„ (ì „ì²´)</option>
                <option value="job">ğŸ’¼ ì§ì—… (Jobs)</option>
                <option value="animal">ğŸ¦ ë™ë¬¼ (Animals)</option>
                <option value="fruit">ğŸ ê³¼ì¼ (Fruits)</option>
                <option value="vehicle">ğŸš€ íƒˆ ê²ƒ (Vehicles)</option>
                <option value="sport">âš½ ìš´ë™ (Sports)</option>
                <option value="country">ğŸ—ºï¸ ë‚˜ë¼ (Countries)</option>
                <option value="color">ğŸ¨ ìƒ‰ê¹” (Colors)</option>
                <option value="nature">ğŸŒ¿ ìì—° (Nature)</option>
                <option value="food">ğŸ• ìŒì‹ (Food)</option>
                <option value="school">âœï¸ í•™êµ (School)</option>
            </select>
            
            <button type="button" onclick="fetchAndFillWords()" style="background:#f39c12">ğŸ”„ ë‹¨ì–´ ì„ê¸°</button>
            <button type="button" onclick="setLanguage('en')">English Mode</button>
            <button type="button" onclick="setLanguage('ko')">í•œêµ­ì–´ ëª¨ë“œ</button>
            <button type="button" onclick="clearAll()" style="background:#e74c3c">ì „ì²´ ì´ˆê¸°í™”</button>
        </div>
        
        <form action="/generate" method="POST">
            <input type="hidden" name="lang" id="lang_mode" value="en">
            <div class="difficulty-section">
                <label>ë‚œì´ë„ (1-100): <span id="diffVal">50</span></label>
                <input type="range" name="difficulty" min="1" max="100" value="50" oninput="document.getElementById('diffVal').innerText = this.value">
            </div>

            <div class="word-grid" id="word-grid">
                {% for i in range(1, 19) %}
                <div class="input-group" id="group_{{ i }}">
                    <span>{{ i }}</span>
                    <input type="text" name="word_{{ i }}" class="word-input" value="{{ en[i-1] if en[i-1] else '' }}" required>
                </div>
                {% endfor %}
            </div>
            <button type="submit" class="generate-btn">PDF ìƒì„± ë° ë‹¤ìš´ë¡œë“œ</button>
        </form>
    </div>
</body>
</html>